<!-- study.component.html -->
<div class="study-wrapper">
  <div class="container study-container">
    <header class="header_ss">
      <h1>Let's Study</h1>
    </header>
    <section class="study-session">
      <div class="deck-selection">
        <div class="selection-group">
          <label for="deckSelect" class="form-label">Select Deck</label>
          <select id="deckSelect" class="form-select" [(ngModel)]="selectedDeckId">
            <option value=null disabled selected>Choose a deck to study...</option>
            <option *ngFor="let deck of decks" [value]="deck.id">{{ deck.name }}</option>
          </select>
        </div>

        <div class="selection-group">
          <label for="studyDirectionSelect" class="form-label">Card Direction</label>
          <select id="studyDirectionSelect" class="form-select" [(ngModel)]="studyDirection">
            <option value="basic" selected>Basic (front-to-back)</option>
            <option value="reverse">Reverse (back-to-front)</option>
          </select>
        </div>

        <div class="selection-group">
          <label for="cardOrderSelect" class="form-label">Study Order</label>
          <select id="cardOrderSelect" class="form-select" [(ngModel)]="cardOrder">
            <option value="sequential" selected>Sequential</option>
            <option value="random">Random</option>
            <option value="reverse">Reverse</option>
          </select>
        </div>

        <button class="start-btn" (click)="startStudy()">Start!</button>
        <button class="end-btn" (click)="endSession()">Reset</button>
      </div>

        <h2 class="deck-title" *ngIf="selectedDeck">{{ selectedDeck.name }}</h2>

        <div class="card-review-container">
            <div class="card front">
                <p *ngIf="currentCard">{{ currentCard.front }}</p>
                <p *ngIf="!currentCard">&nbsp;</p>
            </div>
            <div class="card back">
                <p *ngIf="showAnswerFlag">{{ currentCard?.back }}</p>
                <p *ngIf="!showAnswerFlag">&nbsp;</p>
            </div>
        </div>

        <div class="review-buttons" *ngIf="showAnswerFlag && currentCard">
            <button class="btn success" [class.grey-out]="buttonsDisabled" [disabled]="buttonsDisabled" (click)="reviewCard(currentCard.id, 3)">Got it!</button>
            <button class="btn danger" [class.grey-out]="buttonsDisabled" [disabled]="buttonsDisabled" (click)="reviewCard(currentCard.id, 1)">Missed it!</button>
        </div>

        <div class="navigation-buttons">
            <button class="answer-btn" *ngIf="!showAnswerFlag" (click)="showAnswer()">Show Answer</button>
        </div>

    </section>
    </div>

    <button class="nav-btn prev-btn" (click)="previousCard()"><< Previous</button>
    <button class="nav-btn next-btn" (click)="nextCard()">Next >></button>
    <!-- 사용자 메시지 표시 부분 -->
    <div *ngIf="userMessage" class="user-message">
        {{ userMessage }}
    </div>
</div>

